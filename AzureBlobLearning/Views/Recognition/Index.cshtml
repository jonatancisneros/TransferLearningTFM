
@{
    ViewBag.Title = "Recognition Tool";
}
@*Header Section*@



<!-- Webcam.min.js -->
<script type="text/javascript" src="~/js/webcam.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

<script type="text/javascript" src="https://unpkg.com/@@tensorflow/tfjs"></script>
<script type="text/javascript" src="https://unpkg.com/@@tensorflow-models/mobilenet"></script>
<script type="text/javascript" src="https://unpkg.com/@@tensorflow-models/knn-classifier"></script>


<script>//Calls async Task<ActionResult> DeleteImage(string name) in the HomeController and Refreshes the page
    function deleteImage(item) {
        var url = "/Home/DeleteImage";
        $.post(url, { FileUri: item }, function (data) {
            window.location.href = "/Recognition/Index";
        });
    }

    //Lists the file name and size for all files to be uploaded by updating the <p id="FilesToUpload"></p> control
    function DisplayFilesToUpload() {
        var element = document.getElementById("file");
        var html = "";

        html = "<h3>Image(s) to Upload</h3>"
        for (var i = 0; i < element.files.length; i++) {
            html += "<strong>" + (i + 1) + "</strong>. File: ";
            var file = element.files[i];
            if ('name' in file) { html += file.name + " ("; }
            if ('size' in file) { html += "size: " + file.size + " bytes)<br>"; }
        }

        html += "<div class='fileUpload btn btn-primary'><span>Upload</span><input type='submit' class='upload' value='Upload'/></div>"
        document.getElementById("FilesToUpload").innerHTML = html;
    }</script>







<!-- CSS -->
<style>
    #my_camera {
        width: 320px;
        height: 240px;
        border: 1px solid black;
    }

    .Capture {
    }
</style>
<div class="row">
    <div class="col-sm-12 col-sm-12 alert alert-success alert-dismissible fade show">
        <br />
        <p>Welcome.</p>
            
<div class="captures"></div>

        <div id="console"></div>

   <h3 id="MessageBox"> </h3>
    </div>

</div>


<div class="row">
    <div class="col-sm-4">
      <video autoplay playsinline muted id="webcam" width="400" height="400"></video>    <!-- Load index.js after the content of the page -->
    <script src="~/js/recognition.js"></script>


    </div>

    <div id="results" class="col-sm-4" style="height:240px; overflow:auto"></div>
  
</div>
  



 
    <div class="col-sm-12 col-sm-12 alert alert-light alert-dismissible fade show">
        <br />
    Captured images
        <br />

    </div>



    <div class="row" style=" height:300px; overflow:auto">
        @if (Model != null && Model.Count > 0)
        {
            foreach (var item in Model)
            {


                <div class="imageBlock">
                    <a href="@item" target="_blank"><img class="thumb" src="@item" alt="images" /> @item</a><br />
                    <div class="deleteDiv"><img class="deleteIcon" src="~/Images/deleteImage.png" title="Delete Image" onclick="deleteImage('@item');" /></div>
                </div>
            }

            using (Html.BeginForm("DeleteAll", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                @*<div class="fileUpload btn btn-danger"><span>Delete All Files</span><input type="submit" name="deleteAll" class="upload" /></div>*@
            }
        }

    </div>
